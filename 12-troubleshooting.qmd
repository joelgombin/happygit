---
title: "Troubleshooting"
---

# R√©soudre les probl√®mes courants

Ce chapitre couvre les situations probl√©matiques fr√©quentes et comment les r√©soudre.

## Probl√®mes Git courants

### "Your branch is behind"

```
Your branch is behind 'origin/main' by 3 commits
```

**Solution :**
```bash
# Option 1 : Merge (garde l'historique)
git pull origin main

# Option 2 : Rebase (historique lin√©aire)
git pull --rebase origin main
```

### "Your branch has diverged"

```
Your branch and 'origin/main' have diverged
```

**Solution :**
```bash
# Voir la situation
git log --oneline --graph --all

# Option 1 : Rebase sur main
git rebase origin/main
# R√©soudre les conflits si n√©cessaire
git rebase --continue

# Option 2 : Merge
git merge origin/main
```

### Conflits de merge

```
CONFLICT (content): Merge conflict in file.js
```

**Solution :**
```bash
# Voir les fichiers en conflit
git status

# Ouvrir et r√©soudre manuellement
# Chercher <<<<<<<, =======, >>>>>>>

# Apr√®s r√©solution
git add file.js
git commit -m "Resolve merge conflict"
```

**Avec un agent :**
```
"R√©sous le conflit dans src/app.js.
Contexte : on veut garder les deux fonctionnalit√©s
ajout√©es par chaque branche."
```

### "Detached HEAD"

```
You are in 'detached HEAD' state
```

**Solution :**
```bash
# Revenir √† une branche
git checkout main

# Ou cr√©er une branche √† partir de l'√©tat actuel
git checkout -b my-new-branch
```

### Commit sur la mauvaise branche

**D√©placer le dernier commit :**
```bash
# Sauvegarder le commit
git log -1  # Noter le hash

# Annuler le commit (garder les changements)
git reset --soft HEAD~1

# Changer de branche
git stash
git checkout correct-branch
git stash pop

# Commiter sur la bonne branche
git add .
git commit -m "Your message"
```

### Annuler un push

```bash
# Cr√©er un commit qui annule les changements
git revert HEAD

# Ou plusieurs commits
git revert HEAD~3..HEAD

# Push le revert
git push
```

::: {.callout-warning}
## Ne pas force push sur des branches partag√©es

√âvitez `git push --force` sur main ou des branches o√π d'autres travaillent. Utilisez `git revert` √† la place.
:::

## Probl√®mes avec les agents

### L'agent a cass√© le projet

```bash
# Solution rapide : tout annuler
git checkout .
git clean -fd  # Supprime les fichiers non suivis

# Solution cibl√©e : voir ce qui a chang√©
git diff
# Annuler fichier par fichier
git checkout -- file-that-works.js

# Revenir √† un bon √©tat connu
git log --oneline
git checkout abc1234 -- .
```

### L'agent a cr√©√© des fichiers ind√©sirables

```bash
# Voir les fichiers non suivis
git status

# Supprimer un fichier sp√©cifique
rm unwanted-file.txt

# Supprimer tous les fichiers non suivis
git clean -fd

# Preview avant de supprimer
git clean -fd --dry-run
```

### L'agent a modifi√© des fichiers qu'il ne fallait pas

```bash
# Voir les fichiers modifi√©s
git diff --name-only

# Restaurer certains fichiers
git checkout -- config/production.json
git checkout -- .env.example
```

### Code incompr√©hensible

Demandez des explications :
```
"Explique ce que fait cette fonction ligne par ligne :
[coller le code]"
```

Ou demandez une r√©√©criture :
```
"R√©√©cris cette fonction de mani√®re plus simple
et lisible, avec des commentaires explicatifs."
```

## Probl√®mes d'authentification

### "Permission denied (publickey)"

```bash
# V√©rifier que l'agent SSH tourne
eval "$(ssh-agent -s)"

# Lister les cl√©s charg√©es
ssh-add -l

# Si vide, ajouter la cl√©
ssh-add ~/.ssh/id_ed25519

# Tester la connexion
ssh -T git@github.com
```

### "Repository not found"

Causes possibles :
1. URL incorrecte
2. Pas d'acc√®s au repo
3. Mauvais compte authentifi√©

```bash
# V√©rifier l'URL
git remote -v

# V√©rifier l'acc√®s
gh auth status

# Corriger l'URL si n√©cessaire
git remote set-url origin git@github.com:user/repo.git
```

### Token expir√©

```bash
# GitHub CLI
gh auth refresh

# Ou re-login
gh auth login
```

## Probl√®mes de CI/CD

### Les tests passent localement mais pas en CI

**Causes courantes :**

1. **Variables d'environnement** :
```bash
# V√©rifier que les secrets sont configur√©s
# GitHub ‚Üí Settings ‚Üí Secrets
```

2. **Versions diff√©rentes** :
```yaml
# Fixer les versions dans le workflow
- uses: actions/setup-node@v4
  with:
    node-version: '20.10.0'  # Version exacte
```

3. **√âtat du cache** :
```yaml
# Invalider le cache
key: ${{ runner.os }}-${{ hashFiles('**/lockfile') }}-v2  # Changer v2
```

4. **Diff√©rences OS** :
```yaml
# Tester sur le m√™me OS
runs-on: ubuntu-22.04  # Version sp√©cifique
```

### Le workflow ne se d√©clenche pas

```yaml
# V√©rifier le trigger
on:
  push:
    branches: [main]  # La branche est-elle correcte ?
    paths:
      - 'src/**'      # Le path match-t-il ?
```

### Timeout

```yaml
jobs:
  build:
    timeout-minutes: 30  # Augmenter si n√©cessaire

    steps:
      - name: Long step
        timeout-minutes: 10  # Timeout par step
        run: npm test
```

## R√©cup√©ration de donn√©es

### Fichiers supprim√©s par erreur

```bash
# Si non commit√©
git checkout -- deleted-file.js

# Si dans un commit pr√©c√©dent
git log --all --full-history -- path/to/file
git checkout abc1234 -- path/to/file
```

### Retrouver du travail perdu

```bash
# L'historique de HEAD
git reflog

# Exemple de sortie :
# abc1234 HEAD@{0}: reset: moving to HEAD~3
# def5678 HEAD@{1}: commit: My work  ‚Üê Le travail "perdu"

# R√©cup√©rer
git checkout def5678
# ou
git cherry-pick def5678
```

### R√©cup√©rer un stash supprim√©

```bash
# Lister tous les objets perdus
git fsck --lost-found

# Chercher dans les objets
git show <hash>

# R√©cup√©rer
git stash apply <hash>
```

## Probl√®mes de performance

### Clone lent

```bash
# Clone superficiel (sans historique complet)
git clone --depth 1 https://github.com/user/repo.git

# Clone partiel (blobs √† la demande)
git clone --filter=blob:none https://github.com/user/repo.git
```

### Git status lent

```bash
# Voir ce qui prend du temps
GIT_TRACE=1 git status

# Ignorer les changements de permission
git config core.fileMode false

# Sur les gros repos
git config core.untrackedCache true
git config core.fsmonitor true
```

### Repo devenu √©norme

```bash
# Voir les plus gros fichiers
git rev-list --objects --all | \
  git cat-file --batch-check='%(objecttype) %(objectname) %(objectsize) %(rest)' | \
  awk '/^blob/ {print $3, $4}' | sort -rn | head -20

# Nettoyer (apr√®s suppression des gros fichiers)
git gc --aggressive --prune=now
```

## FAQ

### Comment savoir si du code a √©t√© g√©n√©r√© par IA ?

Il n'y a pas de m√©thode infaillible. Indices possibles :
- Style l√©g√®rement diff√©rent du reste du projet
- Commentaires plus verbeux ou dans un style particulier
- Patterns "corrects mais g√©n√©riques"

### Faut-il mentionner l'utilisation d'IA dans les commits ?

C'est une d√©cision d'√©quipe. Options :
- Ajouter `[AI]` ou `[ai-assisted]` dans le message
- Utiliser un trailer : `AI-assisted: Claude`
- Ne pas mentionner si le code a √©t√© r√©vis√©

### L'IA peut-elle r√©soudre mes conflits Git ?

Oui, souvent efficacement :
```
"J'ai un conflit de merge dans file.js.
Le conflit est :
[coller le conflit]
Contexte : on veut [expliquer l'intention]"
```

### Comment maintenir du code qu'on ne comprend pas ?

1. **Demandez des explications** √† l'agent qui l'a √©crit
2. **Ajoutez des tests** pour verrouiller le comportement
3. **Documentez** au fur et √† mesure que vous comprenez
4. **Refactorisez progressivement** vers quelque chose de plus clair

### Peut-on faire confiance aux tests g√©n√©r√©s par IA ?

V√©rifiez que les tests :
- Testent vraiment ce qu'ils pr√©tendent tester
- Incluent des cas limites
- Peuvent √©chouer (testez en cassant le code volontairement)
- Sont maintenables

---

## Ressources suppl√©mentaires

### Documentation officielle
- [Git Documentation](https://git-scm.com/doc)
- [GitHub Docs](https://docs.github.com)
- [GitHub Actions](https://docs.github.com/actions)

### Communaut√©
- [Simon Willison's Blog](https://simonwillison.net/)
- [Andrej Karpathy](https://karpathy.ai/)
- [The Pragmatic Engineer](https://newsletter.pragmaticengineer.com/)

### Outils mentionn√©s
- [Claude Code](https://claude.ai/code)
- [Cursor](https://cursor.com)
- [GitHub Copilot](https://github.com/features/copilot)
- [Aider](https://aider.chat)

---

F√©licitations ! Vous avez termin√© le guide. Bonne vibe coding ! üéâ
